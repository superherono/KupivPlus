function email_test(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}let unlock=!0,forms=document.querySelectorAll("form");if(forms.length>0)for(let e=0;e<forms.length;e++){forms[e].addEventListener("submit",form_submit)}async function form_submit(e){let t=e.target;console.log(t);let o=t.closest("form");if(console.log(o),0==form_validate(o)){let t=o.getAttribute("action")?o.getAttribute("action").trim():"#",s=o.getAttribute("method")?o.getAttribute("method").trim():"GET";const i=o.getAttribute("data-message"),a=o.getAttribute("data-ajax"),n=o.getAttribute("data-test");if(a){e.preventDefault();let a=new FormData(o);o.classList.add("_sending");let n=await fetch(t,{method:s,body:a});if(n.ok){await n.json();o.classList.remove("_sending"),i&&popup_open(i+"-message"),form_clean(o)}else alert("Ошибка"),o.classList.remove("_sending")}n&&(e.preventDefault(),popup_open(i+"-message"),form_clean(o),console.log("Sended"))}else{let t=o.querySelectorAll("._error");t&&o.classList.contains("_goto-error")&&_goto(t[0],1e3,50),e.preventDefault()}}function form_validate(e){let t=0,o=e.querySelectorAll("._req");if(console.log(o),o.length>0)for(let e=0;e<o.length;e++){const s=o[e];_is_hidden(s)||(t+=form_validate_input(s))}return t}function form_validate_input(e){let t=0,o=e.getAttribute("data-value");if("email"==e.getAttribute("name")||e.classList.contains("_email")){if(e.value!=o){let t=e.value.replace(" ","");e.value=t}email_test(e)||e.value==o?(form_add_error(e),t++):form_remove_error(e)}else"checkbox"==e.getAttribute("type")&&0==e.checked||""==e.value||e.value==o?(form_add_error(e),t++):form_remove_error(e);return t}function form_add_error(e){e.classList.add("_error"),e.parentElement.classList.add("_error");let t=e.parentElement.querySelector(".form__error");t&&e.parentElement.removeChild(t);let o=e.getAttribute("data-error");o&&""!=o&&e.parentElement.insertAdjacentHTML("beforeend",'<div class="form__error">'+o+"</div>")}function form_remove_error(e){e.classList.remove("_error"),e.parentElement.classList.remove("_error");let t=e.parentElement.querySelector(".form__error");t&&e.parentElement.removeChild(t)}function form_clean(e){let t=e.querySelectorAll("input,textarea");for(let e=0;e<t.length;e++){const o=t[e];o.parentElement.classList.remove("_focus"),o.classList.remove("_focus"),o.value=o.getAttribute("data-value")}let o=e.querySelectorAll(".checkbox__input");if(o.length>0)for(let e=0;e<o.length;e++){o[e].checked=!1}let s=e.querySelectorAll("select");if(s.length>0)for(let e=0;e<s.length;e++){const t=s[e],o=t.getAttribute("data-default");t.value=o,select_item(t)}}function body_lock(e){document.querySelector("body").classList.contains("_lock")?body_lock_remove(e):body_lock_add(e)}function body_lock_remove(e){let t=document.querySelector("body");if(unlock){let o=document.querySelectorAll("._lp");setTimeout(()=>{for(let e=0;e<o.length;e++){o[e].style.paddingRight="0px"}t.style.paddingRight="0px",t.classList.remove("_lock")},e),unlock=!1,setTimeout((function(){unlock=!0}),e)}}function body_lock_add(e){let t=document.querySelector("body");if(unlock){let o=document.querySelectorAll("._lp");for(let e=0;e<o.length;e++){o[e].style.paddingRight=window.innerWidth-document.querySelector(".wrapping").offsetWidth+"px"}t.style.paddingRight=window.innerWidth-document.querySelector(".wrapping").offsetWidth+"px",t.classList.add("_lock"),unlock=!1,setTimeout((function(){unlock=!0}),e)}}let inputs=document.querySelectorAll("input[data-value],textarea[data-value]");function inputs_init(e){if(e.length>0)for(let t=0;t<e.length;t++){const o=e[t],s=o.getAttribute("data-value");if(input_placeholder_add(o),""!=o.value&&o.value!=s&&input_focus_add(o),o.addEventListener("focus",(function(e){o.value==s&&(input_focus_add(o),o.value=""),"pass"!==o.getAttribute("data-type")||o.parentElement.querySelector(".form__viewpass").classList.contains("_active")||o.setAttribute("type","password"),o.classList.contains("_date"),o.classList.contains("_phone")&&(o.classList.add("_mask"),Inputmask("+375 (99) 9999999",{clearIncomplete:!0,clearMaskOnLostFocus:!0,onincomplete:function(){input_clear_mask(o,s)}}).mask(o)),o.classList.contains("_digital")&&(o.classList.add("_mask"),Inputmask("9{1,}",{placeholder:"",clearIncomplete:!0,clearMaskOnLostFocus:!0,onincomplete:function(){input_clear_mask(o,s)}}).mask(o)),form_remove_error(o)})),o.addEventListener("blur",(function(e){""==o.value&&(o.value=s,input_focus_remove(o),o.classList.contains("_mask")&&input_clear_mask(o,s),"pass"===o.getAttribute("data-type")&&o.setAttribute("type","text"))})),o.classList.contains("_date")){const e=datepicker(o,{customDays:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],customMonths:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],overlayButton:"Применить",overlayPlaceholder:"Год (4 цифры)",startDay:1,formatter:(e,t,o)=>{const s=t.toLocaleDateString();e.value=s},onSelect:function(e,t,o){input_focus_add(e.el)}}),t=o.getAttribute("data-from"),s=o.getAttribute("data-to");t&&e.setMin(new Date(t)),s&&e.setMax(new Date(s))}}}function input_placeholder_add(e){const t=e.getAttribute("data-value");""==e.value&&""!=t&&(e.value=t)}function input_focus_add(e){e.classList.add("_focus"),e.parentElement.classList.add("_focus")}function input_focus_remove(e){e.classList.remove("_focus"),e.parentElement.classList.remove("_focus")}function input_clear_mask(e,t){e.inputmask.remove(),e.value=t,input_focus_remove(e)}function _is_hidden(e){return null===e.offsetParent}inputs_init(inputs);let popup_link=document.querySelectorAll("._popup-link"),popups=document.querySelectorAll(".popup");for(let e=0;e<popup_link.length;e++){const t=popup_link[e];t.addEventListener("click",(function(e){if(unlock){popup_open(t.getAttribute("href").replace("#",""),t.getAttribute("data-video"))}e.preventDefault()}))}for(let e=0;e<popups.length;e++){popups[e].addEventListener("click",(function(e){e.target.closest(".popup__body")||popup_close(e.target.closest(".popup"))}))}function popup_open(e,t=""){document.querySelectorAll(".popup._active").length>0&&popup_close("",!1);let o=document.querySelector(".popup_"+e);if(console.log(o),o&&unlock){if(""!=t&&null!=t){document.querySelector(".popup_video").querySelector(".popup__video").innerHTML='<iframe src="https://www.youtube.com/embed/'+t+'?autoplay=1"  allow="autoplay; encrypted-media" allowfullscreen></iframe>'}document.querySelector(".menu__body._active")||body_lock_add(500),o.classList.add("_active"),history.pushState("","","#"+e)}}function popup_close(e,t=!0){if(unlock){if(e){let t=e.querySelector(".popup__video");t&&(t.innerHTML=""),e.classList.remove("_active")}else for(let e=0;e<popups.length;e++){const t=popups[e];let o=t.querySelector(".popup__video");o&&(o.innerHTML=""),t.classList.remove("_active")}!document.querySelector(".menu__body._active")&&t&&body_lock_remove(500),history.pushState("","",window.location.href.split("#")[0])}}let popup_close_icon=document.querySelectorAll(".popup__close,._popup-close");if(popup_close_icon)for(let e=0;e<popup_close_icon.length;e++){const t=popup_close_icon[e];t.addEventListener("click",(function(){popup_close(t.closest(".popup"))}))}document.addEventListener("keydown",(function(e){"Escape"===e.code&&popup_close()})),$("#image").change((function(){var e=$(this)[0];if(e.files&&e.files[0])if(e.files[0].type.match("image.*")){var t=new FileReader;t.onload=function(e){$("#image_preview").attr("src",e.target.result),$("#image_preview").siblings("source").attr("srcset",e.target.result),$(".form-sell__image-preview").css("display","block")},t.readAsDataURL(e.files[0])}else console.log("is not image mime type");else console.log("not isset files data or files API not supordet")})),$(document).ready((function(){$(".lk-info .reset").on("click",(function(){$(this).text("Отмена"),$(this).parents(".lk-info").toggleClass("active"),$(this).parents(".lk-info").find(".form-input").prop("disabled",(function(e,t){return!t}))})),$(window).scroll((function(){$(this).scrollTop()>1?$("header").addClass("sticky"):$("header").removeClass("sticky")})),$("body").on("click",".show",(function(){return"password"==$(this).siblings(".form-input").attr("type")?($(this).addClass("view"),$(this).siblings(".form-input").attr("type","text")):($(this).removeClass("view"),$(this).siblings(".form-input").attr("type","password")),!1})),$(".search-form input").focus((function(){$(this).parents(".head-search").addClass("active"),$(".overlay-search").addClass("active"),$(".no-rezult").addClass("active")})),jQuery((function(e){e(document).mouseup((function(t){var o=e(".head-search");o.is(t.target)||0!==o.has(t.target).length||(o.removeClass("active"),e(".overlay-search").removeClass("active"),e(".search-result").removeClass("active"))}))})),$(".search-form input").on("keyup",(function(){$(this).val().length>=1?($(".remove-search").addClass("active"),$(".no-rezult").removeClass("active"),$(".rezults").addClass("active")):($(".remove-search").removeClass("active"),$(".no-rezult").addClass("active"),$(".rezults").removeClass("active"))})),$(".remove-search").on("click",(function(){$(".search-form input").val("").focus(),$(".no-rezult").addClass("active"),$(".rezults").removeClass("active")})),$(".popular-search li").on("click",(function(){var e=$(this).text();$(".search-form input").val(e).focus(),$(".no-rezult").removeClass("active"),$(".rezults").addClass("active"),$(".remove-search").addClass("active")})),$(".cat-toggle").on("click",(function(){$(this).toggleClass("active"),$(".menu").toggleClass("active"),$(".overlay-menu").toggleClass("active"),$(".toggle").toggleClass("active")})),$(".toggle").on("click",(function(){$(this).toggleClass("active"),$(".menu").toggleClass("active"),$(".overlay-menu").toggleClass("active"),$(".cat-toggle").toggleClass("active")})),$(".overlay-menu").on("click",(function(){$(this).removeClass("active"),$(".menu").removeClass("active"),$(".cat-toggle").removeClass("active"),$(".toggle").removeClass("active")})),$(".to-state").on("click",(function(e){e.preventDefault(),$(".state").removeClass("active");var t=$(this).attr("data-state");$(".state[data-state="+t+"]").addClass("active")})),$(".state .close").on("click",(function(e){$(this).parents().removeClass("active")})),jQuery((function(e){e(document).mouseup((function(t){var o=e(".state-box");o.is(t.target)||0!==o.has(t.target).length||(o.parents().removeClass("active"),e("body").removeClass("modal-open"))}))})),$(".add-wishlist").on("click",(function(){$(this).addClass("added-wishlist").html('<i class="icon icon-favorite"></i>'),$(this).parents(".block").find(".wislist-added").html('<i class="icon icon-favorite"></i>')})),$(".rating").each((function(){var e=$(this).find(".rating-agregate").text()/5*100;$(this).find(".progress").css("width",e+"%")})),$(".reviews-total .item").each((function(){var e=$(this).find(".count").text()/$(".reviews-total").find(".rating-count").text()*100;$(this).find(".progress").css("width",e+"%")})),$(".minus").on("click",(function(){let e=$(this).next(".quantity-input"),t=e.val();t>0&&(t--,e.val(t))})),$(".plus").on("click",(function(){let e=$(this).prev(".quantity-input"),t=e.val();t++,e.val(t)})),$(".accordion-box .top").on("click",(function(){$(this).parent(".accordion-box").toggleClass("active")})),$(".topproduct").owlCarousel({loop:!0,nav:!0,navText:["",""],dots:!1,autoplay:!1,autoplayTimeout:3e3,responsiveClass:!0,responsive:{0:{items:1},480:{items:2},640:{items:2},992:{items:5},1220:{items:6}}}),$(".shops__items").owlCarousel({loop:!0,nav:!0,navText:["",""],dots:!1,autoplay:!1,autoplayTimeout:3e3,responsiveClass:!0,responsive:{0:{items:1},480:{items:2},640:{items:2},992:{items:4},1220:{items:4}}}),$(".crossproduct").owlCarousel({loop:!0,nav:!0,navText:["",""],dots:!1,autoplay:!1,autoplayTimeout:3e3,responsiveClass:!0,responsive:{0:{items:1},480:{items:2},640:{items:2},992:{items:4}}}),$(".newproduct").owlCarousel({loop:!0,nav:!0,navText:["",""],dots:!1,autoplay:!1,autoplayTimeout:3e3,owl2row:!0,responsiveClass:!0,responsive:{0:{items:1},480:{items:2},991:{items:3},1220:{items:4}}}),$(".recomproduct").owlCarousel({loop:!0,nav:!0,navText:["",""],dots:!1,autoplay:!1,autoplayTimeout:3e3,owl2row:!0,responsiveClass:!0,responsive:{0:{items:1},480:{items:2},991:{items:3},1220:{items:4}}}),$(".popular-product").owlCarousel({loop:!0,nav:!0,navText:["",""],dots:!1,autoplay:!1,autoplayTimeout:3e3,owl2row:!0,responsiveClass:!0,responsive:{0:{items:1},480:{items:2},991:{items:3},1220:{items:3}}}),$(".sliders").owlCarousel({loop:!0,items:1,nav:!1,navText:["",""],dots:!0,autoplay:!1,autoplayTimeout:3e3}),$(".slider").slick({slidesToShow:1,slidesToScroll:1,infinite:!1,fade:!0,slidesToScroll:1,asNavFor:".slider-nav",prevArrow:'<button type="button" class="slick-prev"></button>',nextArrow:'<button type="button" class="slick-next"></button>',responsive:[{breakpoint:1199,settings:{slidesToShow:1}},{breakpoint:991,settings:{slidesToShow:1}},{breakpoint:768,settings:{slidesToShow:1}}]}),$(".slider-nav").slick({slidesToShow:7,slidesToScroll:1,infinite:!1,asNavFor:".slider",focusOnSelect:!0,prevArrow:'<button type="button" class="slick-prev"></button>',nextArrow:'<button type="button" class="slick-next"></button>',vertical:!0,responsive:[{breakpoint:1199,settings:{slidesToShow:7}},{breakpoint:768,settings:{slidesToShow:7}},{breakpoint:576,settings:{slidesToShow:7}}]}),$(".filter-box .top").on("click",(function(){$(this).parent(".filter-box").toggleClass("active")})),$(".filter-toggle").on("click",(function(){$(".sidebar").toggleClass("active")}));let e=$(".filter .body");function t(e){$(e).find("input").each((function(e,t){e>6&&$(t).parent("label").hide()}))}e.each((function(e,o){$(o).find("input").length>7&&($(o).append('<div class="itemMore"><i class="icon icon-donload"></i> <span>Показать все<span></div>'),t(o))})),$(".itemMore").on("click",(function(){let e=$(this).parent();$(e).find("input");$(this).hasClass("active")?($(this).removeClass("active"),$(this).html('<i class="icon icon-donload"></i> <span>Показать все<span>'),t(e)):($(this).addClass("active"),$(this).html('<i class="icon icon-donload"></i> <span>Свернуть<span>'),function(e){$(e).find("input").each((function(e,t){$(t).parent("label").show()}))}(e))}));var o,s=$(".js-range-slider"),a=$(".js-input-from"),n=$(".js-input-to"),l=220,r=1998;function c(e){l=e.from,r=e.to,a.prop("value",l),n.prop("value",r)}s.ionRangeSlider({skin:"round",type:"double",min:220,max:1998,from:l,to:r,onStart:c,onChange:c}),o=s.data("ionRangeSlider"),a.on("input",(function(){var e=$(this).prop("value");e<220?e=220:e>r&&(e=r),o.update({from:e})})),n.on("input",(function(){var e=$(this).prop("value");e<l?e=l:e>1998&&(e=1998),o.update({to:e})}));var u,p=$(".js-range-slider-1"),d=$(".js-input-from-1"),v=$(".js-input-to-1");function m(e){l=e.from,r=e.to,d.prop("value",l),v.prop("value",r)}p.ionRangeSlider({skin:"round",type:"double",min:35,max:2800,from:35,to:2800,onStart:m,onChange:m}),u=p.data("ionRangeSlider"),d.on("input",(function(){let e=$(this).prop("value");e<35?e=35:e>r&&(e=r),u.update({from:e})})),v.on("input",(function(){let e=$(this).prop("value");e<l?e=l:e>2800&&(e=2800),u.update({to:e})})),$(".all-link").on("click",(function(){$(".tabs").children("div").children("div").hide(),$(".tabs").children("div").children("div").eq(1).show(),$(".tabs").children("ul").children("li").removeClass("active"),$(".tabs").children("ul").children("li").eq(1).addClass("active")})),$(".product-page").on("click","a.all-link",(function(e){e.preventDefault();var t=$(this).attr("href"),o=$(t).offset().top;$("body,html").animate({scrollTop:o-130},700)})),function(e){jQuery.fn.lightTabs=function(t){return this.each((function(){tabs=this,i=0,showPage=function(t){e(tabs).children("div").children("div").hide(),e(tabs).children("div").children("div").eq(t).show(),e(tabs).children("ul").children("li").removeClass("active"),e(tabs).children("ul").children("li").eq(t).addClass("active")},showPage(0),e(tabs).children("ul").children("li").each((function(t,o){e(o).attr("data-page",i),i++})),e(tabs).children("ul").children("li").click((function(){showPage(parseInt(e(this).attr("data-page")))}))}))}}(jQuery),$(".tabs").lightTabs(),$("select").styler()}));